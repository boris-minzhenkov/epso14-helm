# Default values for epso14-helm.
fullname: keycloak
labels:
  app: keycloak
#autoscaling.enable: false
replicaCount: 1
selectorLabels: 
  app: keycloak

keycloak:
  name: keycloak
  image:
    repository: jboss/keycloak
    pullPolicy: IfNotPresent
    # Overrides the image tag whose default is the chart appVersion.
    tag: "15.1.1"
  args: 
    - "-b 0.0.0.0"
    - "-Dkeycloak.profile.feature.upload_scripts=enabled"
  env:
  - name: KEYCLOAK_USER
    value: "admin"
  - name: KEYCLOAK_PASSWORD
    value: "admin"
  - name: PROXY_ADDRESS_FORWARDING
    value: "true"
  ports:
  - name: http
    containerPort: 8080
  - name: https
    containerPort: 8443
  readinessProbe:
    httpGet:
      path: /auth/realms/master
      port: 8080
  volumeMounts:
  - name: tls-keys
    mountPath: "/etc/x509/https"
    readOnly: true

  service:
    name: keycloak
    labels:
      app: keycloak
    ports: 
    - name: http
      port: 8080
      targetPort: 8080
    - name: https
      port: 8443
      targetPort: 8443
    type: CLusterIP

  #TODO: SECRET SHOULD BE MOVED TO KEY VAULT
  secret:
    secretName: tls-keys
    data:
      cert: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQakNDQWlhZ0F3SUJBZ0lVSjAwWE9rYm9oRmFEYVdJL09PVzZKamtZaVhJd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0ZqRVVNQklHQTFVRUF3d0xaWGhoYlhCc1pTNWpiMjB3SGhjTk1qSXhNakExTURrd01qTXhXaGNOTWpNeApNakExTURrd01qTXhXakFUTVJFd0R3WURWUVFEREFoclpYbGpiRzloYXpDQ0FTSXdEUVlKS29aSWh2Y05BUUVCCkJRQURnZ0VQQURDQ0FRb0NnZ0VCQUtyOFNCRnFwTG00S2o1MHI2alprMUZRMGQ2cXE2RVVVTkNsYzVMTEtVV04KVHM3R1hmSVpacXZ6d0kwUzd5UGtDSVZ0YUdOTFBkZm9GVHAyUjNvcEtqYzBpZmxxOW1kWlNzVklKbU14c1dxaAptbGJKYSs2NzJKTVRDdGtCWnN6N051dlBUYWxXRFBZaDJlb201Sm1zd2htb3ZwemFRN3Z1emZRNlBkMW9IN1BZCllaeFdDWE8yM1MzZjhZb3hXbkhQL084b2VjY25qcWc1NGtwN1RuRkdoM1VmS2hzTXoxQ0NvS0ZuWlYzbm1IZUkKcGVDSE5XQ0VCcCtucWdRemRueDZZVk9Oc1ZGU0tBSldadWE3SEs2MlhhKzNhUlRZank0OXRiNjB3dHoxcGxXcQpzcHllb3hvYnh5Z3VYYTVoS0tnajE3ZzBYbm93end3emEvVXdXM1d0UlVjQ0F3RUFBYU9CaGpDQmd6QUpCZ05WCkhSTUVBakFBTUFzR0ExVWREd1FFQXdJRm9EQXBCZ05WSFJFRUlqQWdnZ2hyWlhsamJHOWhhNElVYTJWNVkyeHYKWVdzdVpYaGhiWEJzWlM1amIyMHdIUVlEVlIwT0JCWUVGRmVwdkVKSVR6cHcyc0daNzl5Z1dMc1FIcDB1TUI4RwpBMVVkSXdRWU1CYUFGUEdnU0t2MFVEaHljdFFrdGNGczd2YkZSTjdQTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCCkFRQTdEZnRwNi9OR2FzOTE4TzZZdmg1SGlLcWhNalptYStqSS9PdHdwdVQxdXUwY1JkNWVMd2VUekpqUHQ2dTQKNnpjaWsxbUMwb1d2M05KSG9EQ0d3V0lZUDJqbmVNKzYxbXFOTFR0M1dBWkZTU3hLcVFnblRJMW9JdmtpekExQwp2Y1pGQXUzeDZ3aE9TQU1LSEo1UGd4ZnkyOW4vbG1Gd3dHTUhPS29ETUgxUWtzcjAxcnY3dXJPalh1T2k4K3JTCmhtWU5JMkxiYUdyRlAzbHl4cVQ3VlJFVUxJUnBWelhPNVRLRnJOclN6MTM1RE5KQyticmRNSnU0bnVFQVZYRzYKb0lhclNiVUZ5eHg3ekFOYlIvMFFNV05ZREl1d1YyM2J0bGM1a0t5UGJFTE5LWWtuU3hxYXVtU1NUL1ltaUljbAoweDhGdE4yYUVXTDR2dU4yS29mcHpSUnQKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
      key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2QUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktZd2dnU2lBZ0VBQW9JQkFRQ3EvRWdSYXFTNXVDbysKZEsrbzJaTlJVTkhlcXF1aEZGRFFwWE9TeXlsRmpVN094bDN5R1dhcjg4Q05FdThqNUFpRmJXaGpTejNYNkJVNgpka2Q2S1NvM05JbjVhdlpuV1VyRlNDWmpNYkZxb1pwV3lXdnV1OWlURXdyWkFXYk0remJyejAycFZnejJJZG5xCkp1U1pyTUlacUw2YzJrTzc3czMwT2ozZGFCK3oyR0djVmdsenR0MHQzL0dLTVZweHovenZLSG5ISjQ2b09lSksKZTA1eFJvZDFIeW9iRE05UWdxQ2haMlZkNTVoM2lLWGdoelZnaEFhZnA2b0VNM1o4ZW1GVGpiRlJVaWdDVm1ibQp1eHl1dGwydnQya1UySTh1UGJXK3RNTGM5YVpWcXJLY25xTWFHOGNvTGwydVlTaW9JOWU0TkY1Nk1NOE1NMnYxCk1GdDFyVVZIQWdNQkFBRUNnZ0VBTG9SYkFPMy82WXpLWlZwdWJhUGZ1Y2dnaUpEckIzUVU5bWFFdGtOeU0zdFoKbk5TSHUzVWdveGc1NHNkcmF0cS9YTGxpcEZ6VWN0Z3Zha3ZDYjJBaW5ZazhIakIwMzdJQnJ3Rk5mRUFKTWViTQpLOTg1YjJZSWFoN01uVFFONlNkUkRqOUVOQlQyaXNHejNNbCsrTFh3eW5WSGdqbTVJcmc1ckw5cGxFSWZHZGlLCnRzMmMvY2tJWVFLczVNU1hUNkN5WWNMUmwrdTdjV1lobkNHRldlSkNEcHpOZk01cThDNmVwNFhGMnljbFhvVTgKdGNLVjlCbWlrNG1lajZvaUxKZzd0M2pEekRrMXZHUW5DMkNkUS9RalJobHVzM0QvVHF3RWF2eHNTMHQyckcwQgpOWEx0YWlTbkVMOWNBdDlWL3JscmdmZStxc0x0akZleVlMMmc4L3BnQlFLQmdRRGc2VnQ1WlY1YndZb2FXSWE5CkdaWERUZUNHVUtma28xeE85MmdQS3NzblN0ekFXQStGTm5aendiUUIxUElPSU1TUHR2RjFJR2pFMlA1SlVFQ1QKQ25yUU9Yd2dVUm5pWmZ6c3lhTnVGZXpkSS9Kd0phSXhnTHhMSU9OR1pBczI5SUtPS2preDJoclVnSjhJbFQzbQo1cTAzZlkrdE9aNWg1Rk52SzAwNUs3RmI0d0tCZ1FEQ25yYndQRzl1N0FlSVB3Rm0yL1QxL1M5b1lPUmVGV21OCnYrLzRJYlY5eldSMlZLdFp5V092RUtSTTBHMWNCaW9ldUZEYmJZamRkNHVFdFpOZGtPQ0RQa0pBVkU4RUZBNC8KZlJNeGFlVUFoazJicjgyNE4rS3RoTUlnUm1neEtycTVQQkhvZm51SkVNa0ZJa2RuMVRiZlBlUlB6MTdQc1VBOQo2VWdLY0Q1MlRRS0JnR0JBbmd3cTdLSGFCdzlWV1h4dUNhREdvRkw3QzQ4V3RuZDQvQWlacU0yTkJVSXZyWnkxCi9TVjIvV0ZYVDZ2cUxCVFJGeTZvQ3c1TFN5LzI3MXUrUFdjRll2QzFwSjAyUm5MVHJHUjliNXdJT1VYelpTRkkKVmN6VkswN0JtK2NONXgyT1JtSG1WRnNqSEd4ZzZsZjUycUdIMDhndmcyK2pkbTE2RzVkZThvMC9Bb0dBR0c4Ywp3S1NWeVBOUkxzWGFRek95V1gva0I5TENXUjJQRndEVisrMGZnQi9kVVEzb1JXbUhYbDlVZ1dCWm1vZ2JtYWZDClh3b3RlTUNkZjVmY1hJN240UkpiOXYrZXZBQlltWmYyWk9uS21ucENIQjNDVWpLUi92Ny84RlZtbDJXcDg3K2EKNy9tUlFQQWVqTXAwOUpCTVIxTFo2enM1eUJHVTR6RDZublRoSXJFQ2dZQTRpSlU5MStDOWpQMXAzVlhqakNKbApsWWZhOExaQTBCVlNnc3pmeXJCeGNkWms3ejZVbzQyVERCeEhxS1J5Y3BrZGdyYTd5Tm8yQlhFekhQZjg3MGRICjd3ZkhrMTBPQ1YrWXh3RFlvVW1rL0Z3WTR2ekxQWFVpWGtqVWlzZEtzdzhaSWdHWkZUSm1KUU81TVlHa0F4OGEKeEhITGtTNHFlc0N2Z2pNZXI4Z3N3dz09Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K

resources: {}

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

volumes:
  - name: tls-keys
    secret:
      secretName: tls-keys
